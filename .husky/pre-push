#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-push checks..."

# Generate Prisma Client (required for build)
echo "ğŸ“¦ Generating Prisma Client..."
npm run db:generate

# Run linting
echo "ğŸ”§ Running ESLint..."
npm run lint || {
  echo "âŒ ESLint failed! Please fix errors before pushing."
  exit 1
}

# Run build (catches TypeScript and build errors)
echo "ğŸ—ï¸  Running production build..."
npm run build || {
  echo "âŒ Build failed! Please fix errors before pushing."
  exit 1
}

echo "âœ… All pre-push checks passed! Pushing to remote..."
